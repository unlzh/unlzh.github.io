<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta name="google-site-verification" content="ug1t8aqiM8pT-CENiyJOv1qGIAJwvRaPbxiRlnxxUcU"><meta name="baidu-site-verification" content="PlU0GdywA0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Django快速入门——开发简单的博客应用"><meta name="keywords" content="Django"><meta name="author" content="unlzh,undefined"><meta name="copyright" content="unlzh"><title>Django快速入门——开发简单的博客应用 | unlzh·Blog</title><link rel="shortcut icon" href="/favicon.png"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/gh/upupming/gitalk@36368e5dffd049e956cdbbd751ff96c28d8255cf/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Django的简介——维基百科"><span class="toc-text">Django的简介——维基百科</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发环境准备"><span class="toc-text">开发环境准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主要开发流程"><span class="toc-text">主要开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-创建项目和应用"><span class="toc-text">1.  创建项目和应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-创建数据模型"><span class="toc-text">2. 创建数据模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-编写views-py"><span class="toc-text">3. 编写views.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-添加页面"><span class="toc-text">4. 添加页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-创建后台管理系统"><span class="toc-text">5. 创建后台管理系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-配置url"><span class="toc-text">6. 配置url</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结尾"><span class="toc-text">结尾</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://unlzhblog-1258116282.cos.ap-guangzhou.myqcloud.com/avatar.jpg"></div><div class="author-info__name text-center">unlzh</div><div class="author-info__description text-center">分享技术、生活。</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">8</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">8</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">6</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://unlzhblog-1258116282.cos.ap-guangzhou.myqcloud.com/homebanner.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">unlzh·Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span></div><div id="post-info"><div id="post-title">Django快速入门——开发简单的博客应用</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-09-26</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Python/">Python</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1.6k</span><span class="post-meta__separator">|</span><span>阅读时长: 5 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="Django的简介——维基百科"><a href="#Django的简介——维基百科" class="headerlink" title="Django的简介——维基百科"></a>Django的简介——维基百科</h2><blockquote>
<p>Django是一个开放源代码的Web应用框架，由Python写成。采用了MVT的软件设计模式，即模型Model，视图View和模板Template。它最初是被开发来用于管理劳伦斯出版集团旗下的一些以新闻内容为主的网站的。并于2005年7月在BSD许可证下发布。这套框架是以比利时的吉普赛爵士吉他手Django Reinhardt来命名的。</p>
<p>Django的主要目标是使得开发复杂的、数据库驱动的网站变得简单。Django注重组件的重用性和“可插拔性”，敏捷开发和DRY法则（Don’t Repeat Yourself）。在Django中Python被普遍使用，甚至包括配置文件和数据模型。</p>
</blockquote>
<h2 id="开发环境准备"><a href="#开发环境准备" class="headerlink" title="开发环境准备"></a>开发环境准备</h2><p>项目采用 <strong>Python 3.7.1</strong>、<strong>Django 2.2.2</strong> 开发。</p>
<p>系统环境 Windows 10，开发工具 PyCharm。</p>
<p>virtualenv创建虚拟环境，安装Django。</p>
<p>Django的安装在 <a href="https://www.djangoproject.com/download/" target="_blank" rel="noopener">https://www.djangoproject.com/download/</a> 有详细说明，过程较简单，在此不做介绍。</p>
<a id="more"></a>
<h2 id="主要开发流程"><a href="#主要开发流程" class="headerlink" title="主要开发流程"></a>主要开发流程</h2><h3 id="1-创建项目和应用"><a href="#1-创建项目和应用" class="headerlink" title="1.  创建项目和应用"></a>1.  创建项目和应用</h3><p>进入项目目录，打开cmd，执行<code>django-admin startproject myblog</code>，项目创建成功之后生成myblog目录，用PyCharm打开</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">myblog/</span><br><span class="line">├── <span class="emphasis">_init_</span>.py</span><br><span class="line">└── settings.py      - 项目配置文件</span><br><span class="line">└── urls.py          - url配置文件</span><br><span class="line">└── wsgi.py          - Python服务器网关接口</span><br><span class="line"></span><br><span class="line">manage.py            - 项目管理器，通过命令行进行交互</span><br></pre></td></tr></table></figure>
<p>进入myblog目录下，在命令行执行<code>python manage.py startapp blog</code>，创建博客应用，然后在settings.py文件的INSTALLED_APPS中添加应用名“blog”</p>
<p><img src="https://unlzhblog-1258116282.cos.ap-guangzhou.myqcloud.com/Django%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%BA%94%E7%94%A8/%E6%B7%BB%E5%8A%A0blog.png" alt="添加应用名"></p>
<p>应用创建成功后生成blog应用目录</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">blog/</span><br><span class="line">├── <span class="emphasis">_init_</span>.py</span><br><span class="line">└── admin.py         - 后台管理系统配置文件</span><br><span class="line">└── apps.py          - 应用配置文件</span><br><span class="line">└── models.py        - 数据模型，使用ORM框架</span><br><span class="line">└── tests.py         - 测试</span><br><span class="line">└── views.py         - 控制器模块</span><br><span class="line">└── migrations/      - 数据移植模块</span><br></pre></td></tr></table></figure>
<h3 id="2-创建数据模型"><a href="#2-创建数据模型" class="headerlink" title="2. 创建数据模型"></a>2. 创建数据模型</h3><p>该博客应用比较简单，我们先来创建数据模型。</p>
<p>在Django中，通过ORM，一个model对应数据库的一张表，我们只需要以类的形式创建model，不需要写sql语句。</p>
<p>blog目录下的models.py文件中创建文章数据模型</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    文章数据模型</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># 文章标题</span></span><br><span class="line">    title = models.CharField(max_length=<span class="number">32</span>, default=<span class="string">'Title'</span>)</span><br><span class="line">    <span class="comment"># 文章摘要</span></span><br><span class="line">    summary = models.CharField(max_length=<span class="number">64</span>, null=<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># 文章内容</span></span><br><span class="line">    content = models.TextField(null=<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># 文章图片</span></span><br><span class="line">    pic = models.ImageField(upload_to=<span class="string">'article_pic'</span>, null=<span class="keyword">True</span>)</span><br><span class="line">    <span class="comment"># 发表/修改日期</span></span><br><span class="line">    pub_date = models.DateField(auto_now=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.title</span><br></pre></td></tr></table></figure>
<p>在项目根目录下(manage.py同级)打开cmd，执行<code>python manage.py makemigrations blog</code>，然后再执行<code>python manage.py migrate</code>，进行数据移植。显示“ok”则表示数据迁移成功。打开sqlite3数据库，这里我使用的是SQLite Expert Personal 5，找到blog_article便可看到数据表了。此外，还可以打开migrations目录下生成的数据移植文件或者在命令行中执行<code>python manage.py sqlmigrate blog 文件id</code>（文件id在执行数据迁移时显示在命令行中，第一次执行是0001，第二次0002…）查看具体的sql语句。</p>
<h3 id="3-编写views-py"><a href="#3-编写views-py" class="headerlink" title="3. 编写views.py"></a>3. 编写views.py</h3><p>有了数据模型之后，就可以在views.py中响应请求了。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    主页控制器</span></span><br><span class="line"><span class="string">    :param request: 请求</span></span><br><span class="line"><span class="string">    :return: 数据库文章数据</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># 获取文章数据集</span></span><br><span class="line">    articles = models.Article.objects.all()</span><br><span class="line">    <span class="comment"># 将文章数据集对象传递给主页</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'index.html'</span>, &#123;<span class="string">'articles'</span>: articles&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">article_page</span><span class="params">(request, article_id)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    指定文章页面</span></span><br><span class="line"><span class="string">    :param request: 请求</span></span><br><span class="line"><span class="string">    :param article_id: 文章id</span></span><br><span class="line"><span class="string">    :return: 指定文章对象</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># 根据文章id获取相应的文章对象</span></span><br><span class="line">    article = models.Article.objects.get(pk=article_id)</span><br><span class="line">    <span class="comment"># 文章总量</span></span><br><span class="line">    count = models.Article.objects.all().count()</span><br><span class="line">    <span class="comment"># 将指定的文章对象和id传递给文章详情页面</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'article_page.html'</span>, &#123;<span class="string">'article'</span>: article, <span class="string">'count'</span>: count&#125;)</span><br></pre></td></tr></table></figure>
<p>views.py的作用就类似MVC模式中的Controller，获取前端请求进行处理之后返回。</p>
<h3 id="4-添加页面"><a href="#4-添加页面" class="headerlink" title="4. 添加页面"></a>4. 添加页面</h3><p>我们的博客应用有两个页面，一个是主页，一个是博文的详情页。这里我们用Django自带的模板引擎，在前台页面通过<code>{{ 参数名 }}</code>的形式获取后台传递的参数。</p>
<p>另外，博客文章的图片存放在blog/media/article_pic/中，静态文件存放在blog/static/中，需要settings.py配置路径</p>
<p><img src="https://unlzhblog-1258116282.cos.ap-guangzhou.myqcloud.com/Django%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84.png" alt="配置静态资源路径"></p>
<p>在myblog/urls.py中引入</p>
<p><img src="https://unlzhblog-1258116282.cos.ap-guangzhou.myqcloud.com/Django%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%BA%94%E7%94%A8/%E5%BC%95%E5%85%A5%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84.png" alt="引入静态资源路径"></p>
<p>具体页面代码到我的<a href="https://github.com/unlzh/Demo_SimpleBlog" target="_blank" rel="noopener">github</a>中获取。</p>
<h3 id="5-创建后台管理系统"><a href="#5-创建后台管理系统" class="headerlink" title="5. 创建后台管理系统"></a>5. 创建后台管理系统</h3><p>Django自带了一个功能强大的数据管理后台，被授权的用户可以在后台中管理数据库，所以可以通过该后台管理界面管理博客的文章。</p>
<p>在命令行执行<code>python manage.py createsuperuser</code>按提示输入用户名和密码创建后台管理用户。修改settings.py中的LANGUAGE_CODE为“zh-hans”，让后台管理界面显示中文。</p>
<p>接着，在admin.py中配置文章列表的显示和日期组件，并注册数据模型类，这里就是文章数据</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Article</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleAdmin</span><span class="params">(admin.ModelAdmin)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    后台管理配置</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># 配置文章列表显示字段</span></span><br><span class="line">    list_display = (<span class="string">'title'</span>, <span class="string">'summary'</span>, <span class="string">'pub_date'</span>,)</span><br><span class="line">    <span class="comment"># 配置日期过滤器</span></span><br><span class="line">    list_filter = (<span class="string">'pub_date'</span>,)</span><br><span class="line"></span><br><span class="line">admin.site.register(Article, ArticleAdmin)</span><br></pre></td></tr></table></figure>
<h3 id="6-配置url"><a href="#6-配置url" class="headerlink" title="6. 配置url"></a>6. 配置url</h3><p>myblog目录下的urls根配置文件配置如下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.conf.urls.static <span class="keyword">import</span> static</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">''</span>, include((<span class="string">'blog.urls'</span>, <span class="string">'blog'</span>), namespace=<span class="string">'blog'</span>)),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入静态资源路径</span></span><br><span class="line">urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<p>其中第一个path就是默认的后台管理界面地址，第二个path是博客的主页地址，引入blog目录下的urls配置。</p>
<p>在blog目录下创建urls.py，配置博客的页面地址。如下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">''</span>, views.index),</span><br><span class="line">    path(<span class="string">'article/&lt;int:article_id&gt;'</span>, views.article_page, name=<span class="string">'article'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>其中，第一个path是博客的主页，这里配置为空字符串，即不需要输入其他子路径，只需输入地址加端口号即可来到博客主页。第二个path是主页的超链接配置，通过点击文章列表传递文章id到views.py中的article_page方法进行处理，便可跳转到相应文章的详情页。</p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><ul>
<li>博客的运行效果以及源码在我的<a href="https://github.com/unlzh/Demo_SimpleBlog" target="_blank" rel="noopener">github</a></li>
<li>本篇是自己入门Django时的学习记录，学习来源：杜秉轩老师的<a href="https://www.imooc.com/learn/790" target="_blank" rel="noopener">django入门与实践</a></li>
<li>Django还有各种各样的奇淫技巧，可以去<a href="https://www.djangoproject.com/" target="_blank" rel="noopener">官网</a>或者<a href="https://www.django.cn/" target="_blank" rel="noopener">中文社区</a>进一步学习</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">unlzh</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://unlzh.github.io/2019-Python/Django快速入门——开发简单的博客应用/">https://unlzh.github.io/2019-Python/Django快速入门——开发简单的博客应用/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://unlzh.github.io" target="_blank">unlzh·Blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Django/">Django</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019-实践记录/Layui获取后台数据渲染导航菜单/"><i class="fa fa-chevron-left">  </i><span>Layui获取后台数据渲染导航菜单</span></a></div><div class="next-post pull-right"><a href="/2019-Java基础/Java8之Stream-API/"><span>Java8之Stream API</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '94e0f2be0076760d4dc2',
  clientSecret: 'ae20eb3a6e311d566527105c71a48b7245e01478',
  repo: 'unlzh.github.io',
  owner: 'unlzh',
  admin: 'unlzh',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By unlzh</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script></body></html>